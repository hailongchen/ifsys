<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>独孤九剑-修改接口</title>
		<link rel="stylesheet" type="text/css" href="info/css/amazeui.min.css">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<script type="text/javascript" src="info/js/jquery.min.js"></script>
		<script src="js/plugin/myThirdPlugin.js"></script>
		<script type="text/javascript">
			$(function() {
				var id = $.getUrlParam("id");
				var sendData = {
					"interFaceInfo": {
						"id": id
					}
				};
				$.ajax({
					type: "POST",
					url: "queryInterFaceById.do",
					dataType: "json",
					contentType: "application/json",
					data: JSON.stringify(sendData),
					async: false,
					error: function(request) {
						alert("Connection error");
					},
					success: function(data) {
						if (data.rspCd == "00000") {
							$("#id").val(data.interFaceInfo.id);
							$("#ifName").val(data.interFaceInfo.ifName);
							$("#ifDesc").val(data.interFaceInfo.ifDesc);
							$("#ifUrl").val(data.interFaceInfo.ifUrl);
							$("#ifRequest").val(data.interFaceInfo.ifRequest);
							$("#ifResponseSuccuss").val(data.interFaceInfo.ifResponseSuccuss);
							$("#ifResponseFailure").val(data.interFaceInfo.ifResponseFailure);
						} else {
							alert("失败处理");
						}
					}
				});
				$("#updateInterFaceBtn").click(function() {
					var sendData = {};
					sendData.interFaceInfo = $('#interFaceUpdateForm').serializeJson();
					console.log(sendData);
					$.ajax({
						type: "POST",
						url: "updateInterFace.do",
						dataType: "json",
						contentType: "application/json",
						data: JSON.stringify(sendData),
						async: false,
						error: function(request) {
							alert("Connection error");
						},
						success: function(data) {
							console.log(data);
							if (data.rspCd == "00000") {
								alert("修改成功");
								//self.location.href="interFaceDetail.html?id="+data.interFaceInfo.id
							} else {
								alert("失败处理");
							}
						}
					});
				});
				//测试接口
				$("#testInterFaceBtn").click(function() {});
			});
		</script>

	</head>

	<body>
		<header data-am-widget="header" class="am-header am-titlebar am-header-default">
			<h1 class="am-header-title">
        <a href="#title-link" class="">独孤九剑 修改接口 </a>
    </h1>

			<div class="am-header-right am-header-nav">
				<i class="am-header-icon am-icon-bars" title="开发ing..."> </i>
				<div class="am-dropdown" data-am-dropdown>
					<button class="am-btn am-btn-primary am-dropdown-toggle menu" data-am-dropdown-toggle>
						查看功能<span class="am-icon-caret-down"></span>
					</button>
					<ul class="am-dropdown-content">
						<li><a href="main.html">接口查询</a></li>
						<!-- <li><a href="goAddInterFace">添加系统</a></li>
                    <li><a href="#">添加产品</a></li> -->
						<li><a href="interFaceAdd.html">添加接口</a></li>
					</ul>
				</div>
			</div>
		</header>

		<form id="interFaceUpdateForm">
			<input type="hidden" name="id" id="id" value="${interFaceInfo.id}" />
			<table class="am-table am-table-bordered am-table-hover">
				<caption>新增接口信息</caption>
				<tr>
					<th class="am-primary">接口名字</th>
					<td>
						<input id="ifName" name="ifName" value="${interFaceInfo.ifName }" />
					</td>
				</tr>
				<tr>
					<th class="am-primary">接口功能描述</th>
					<td>
						<input id="ifDesc" name="ifDesc" value="${interFaceInfo.ifDesc }" />
					</td>
				</tr>
				<tr>
					<th class="am-primary">接口URL</th>
					<td colspan="5">
						<input id="ifUrl" name="ifUrl" value="${interFaceInfo.ifUrl }" />
					</td>
				</tr>
				<tr>
					<th class="am-primary">请求部分</th>
					<td colspan="6" rowspan="3">
						<textarea id="ifRequest" name="ifRequest">
							${interFaceInfo.ifRequest }
						</textarea>
					</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
				</tr>
				<tr>
					<th colspan="6" class="am-warning">响应部分</th>
				</tr>
				<tr>
					<th class="am-primary">成功(Success)</th>
					<td colspan="6" rowspan="3">
						<textarea id="ifResponseSuccuss" name="ifResponseSuccuss">
							${interFaceInfo.ifResponseSuccuss}
						</textarea>
					</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
				</tr>
				<tr>
					<th class="am-primary">失败(Error)</th>
					<td colspan="6" rowspan="3">
						<textarea id="ifResponseFailure" name="ifResponseFailure">
							${interFaceInfo.ifResponseFailure}</textarea>
					</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
				</tr>
			</table>
			<div class="propButton">
				<button type="button" id="updateInterFaceBtn" class="am-btn am-btn-success">确认修改</button>

				<!--   <button type="button" id="testInterFaceBtn"
            class="am-btn am-btn-success" >测试</button>   -->
			</div>
		</form>
		<script src="info/js/amazeui.min.js"></script>
	</body>

</html>